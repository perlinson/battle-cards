(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{639:function(e,t,n){"use strict";n.r(t);var r=n(4),o=(n(19),n(43),{asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$axios,t.next=3,n.get("/api/games").then((function(e){return e.data.rows}));case 3:return r=t.sent,t.next=6,n.get("/api/players").then((function(e){return e.data.rows}));case 6:return o=t.sent,t.abrupt("return",{games:r,players:o});case 8:case"end":return t.stop()}}),t)})))()},data:function(){return{search:"",headers:[{text:"Name",value:"name"},{text:"Creator",value:"creator"},{text:"# of Players",value:"players.length"},{text:"Status",value:"status"},{text:"Action",value:"action"}],games:[],joinDialog:{visible:!1,headers:[{text:"Player Name"}],game:{},yourname:""},createDialog:{visible:!1,name:"",creator:this.$auth.user.id}}},methods:{getAllGames:function(){return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},joinGameOnLoad:function(e){return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},handleActionClick:function(e){this.$snackbar("You clicked ".concat(e.name))},clearJoinDialog:function(){this.joinDialog.game={},this.joinDialog.yourname=""},closeJoinDialog:function(){this.joinDialog.visible=!1,this.clearJoinDialog()},closeCreateDialog:function(){this.createDialog.visible=!1},joinGame:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.joinDialog.visible=!1,t.next=3,e.$store.dispatch("joinGame",{gameid:e.joinDialog.game.id,name:e.joinDialog.yourname});case 3:case"end":return t.stop()}}),t)})))()},createGame:function(){var e=this;this.createDialog.name?this.createDialog.creator&&""!==this.createDialog.creator?(this.$axios.$post("/api/games/",{name:this.createDialog.name,creator:this.createDialog.creator}).then((function(t){e.$router.push("/game/".concat(t.id))})),this.createDialog.visible=!1):this.$snackbar("updateSnack","Undefined Creator Name"):this.$snackbar("Undefined Game name")},deleteItems:function(){}}}),l=n(41),c=n(68),v=n.n(c),m=n(459),d=n(480),f=n(479),h=n(475),k=n(624),_=n(646),D=n(225),x=n(528),y=n(516),j=n(483),w=n(473),C=n(474),V=n(509),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"fill-height":"",fluid:""}},[n("v-row",{attrs:{justify:"center"}},[n("v-card",{attrs:{outlined:"",width:"100%"}},[n("v-card-title",{staticStyle:{"background-color":"#333"}},[n("small",[e._v("游戏列表")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.getAllGames()}}},[n("v-icon",[e._v("mdi-refresh")])],1),e._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.createDialog.visible=!0}}},[n("v-icon",[e._v("mdi-plus")])],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{on:{click:e.deleteItems}},[n("small",[e._v("删除选定的游戏")])])],1),e._v(" "),n("v-data-table",{attrs:{headers:e.headers,items:e.games,search:e.search,"items-per-page":10,dense:"","show-select":""},scopedSlots:e._u([{key:"item.action",fn:function(t){var r=t.item;return[n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.handleActionClick(r)}}},[e._v("\n            "+e._s("Playing"==r.status?"WATCH":"JOIN")+"\n          ")])]}}],null,!0)})],1)],1),e._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.joinDialog.visible,callback:function(t){e.$set(e.joinDialog,"visible",t)},expression:"joinDialog.visible"}},[n("v-card",[n("v-card-title",{staticClass:"blue"},[n("strong",[e._v("游戏名称: "+e._s(e.joinDialog.game.name))])]),e._v(" "),n("v-card-text",[n("v-card-subtitle",[n("h3",[e._v("当前玩家数目")])]),e._v(" "),n("v-list",e._l(e.joinDialog.game.players,(function(t,i){return n("v-list-item",{key:i},[n("v-list-item-content",{staticClass:"pl-4"},[e._v("\n              -- "+e._s(t.name)+"\n            ")])],1)})),1),e._v(" "),n("v-text-field",{attrs:{label:"Your name",outlined:""},model:{value:e.joinDialog.yourname,callback:function(t){e.$set(e.joinDialog,"yourname",t)},expression:"joinDialog.yourname"}})],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeJoinDialog}},[n("small",[e._v("关闭")])]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.joinGame}},[e._v("Join")])],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.createDialog.visible,callback:function(t){e.$set(e.createDialog,"visible",t)},expression:"createDialog.visible"}},[n("v-card",[n("v-card-title",{staticClass:"blue"},[n("small",[e._v("创建游戏")])]),e._v(" "),n("v-card-text",[n("v-text-field",{staticClass:"pt-4",attrs:{autofocus:"",label:"Game name",outlined:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createGame.apply(null,arguments)}},model:{value:e.createDialog.name,callback:function(t){e.$set(e.createDialog,"name",t)},expression:"createDialog.name"}}),e._v(" "),n("v-text-field",{attrs:{label:"Creator name",outlined:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createGame.apply(null,arguments)}},model:{value:e.createDialog.creator,callback:function(t){e.$set(e.createDialog,"creator",t)},expression:"createDialog.creator"}})],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeCreateDialog}},[n("small",[e._v("取消")])]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.createGame}},[n("small",[e._v("创建 & 加入")])])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;v()(component,{VBtn:m.a,VCard:d.a,VCardActions:f.a,VCardSubtitle:f.b,VCardText:f.c,VCardTitle:f.d,VContainer:h.a,VDataTable:k.a,VDialog:_.a,VIcon:D.a,VList:x.a,VListItem:y.a,VListItemContent:j.a,VRow:w.a,VSpacer:C.a,VTextField:V.a})}}]);